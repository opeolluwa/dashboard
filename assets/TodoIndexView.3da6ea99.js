import{u as I,C as U,k as y,d as V,I as E,D as q,_ as F,r as d,o as u,j as v,w as _,x as N,b as t,a as s,t as b,g as r,v as l,B as J,f as G,m as B,c as L,y as H,F as C,E as K,G as Q,l as W,p as X,h as Y}from"./index.f5b45506.js";import{A as Z,a as x}from"./AppEmptyState.ea70afc1.js";import{B as oo}from"./BaseTextInput.638ca571.js";import{A as eo}from"./AppNetworkError.9f9881b8.js";import{S as to}from"./AppLoader.e532034f.js";const so=I(),A=so.getAuthToken,M=U("todoStore",{state:()=>({todoArray:null,noOfRows:10,pageIndex:1,isLoading:!1,isFetchingTodoArray:!1,errorFetchingTodo:!1,errorMessage:""}),getters:{getAllTodo:o=>o.todoArray},actions:{async fetchAllTodo(){this.isFetchingTodoArray=!0;try{const{data:o}=await y.get("/todo",{headers:{Authorization:`Bearer ${A}`}});this.todoArray=o.data.todo,this.noOfRows=o.data.noOfRows,this.pageIndex=o.DataTransfer.CurrentPage,this.isFetchingTodoArray=!1,console.log(JSON.stringify(o))}catch{this.isFetchingTodoArray=!1}},async createTodo(o){I(),this.isLoading=!0;try{const e=o.priority.split(" ").join("-")||o.priority,{data:i}=await y.post("/todo",{...o,priority:e},{headers:{Authorization:`Bearer ${A}`}});i.success&&(this.fetchAllTodo(),this.isLoading=!1,o.title="",o.description="")}catch{this.errorFetchingTodo=!0,this.isLoading=!1}this.isLoading=!1},async deleteTodo(o){try{const{data:e}=await y.delete(`/todo/${o}`,{headers:{Authorization:`Bearer ${A}`}});e.success&&this.fetchAllTodo(),console.log("the todo id is ",o),console.log(JSON.stringify(e))}catch{}}}});let w=!0;const no=V({name:"AppTodoItem",components:{Icon:E,AppListItem:q},data:()=>({}),props:{todo:{type:Object,required:!0,default:()=>({title:"Todo title",description:"Todo description"})}},computed:{isSelected(){return w},priority(){const o=this.todo.priority.toLowerCase().trim();return o==="urgent"?"todo__item--urgent":o==="delicate"?"todo__item--delicate":o==="not-urgent"?"todo__item--not__urgent":o==="delete"?"todo__item--delete":"todo__item--normal"}},mounted(){const o=document.getElementsByClassName("todo__item"),e=1300;for(const i of o)i.addEventListener("mousedown",function(m){setTimeout(c,e);function c(){w=!1,console.log("long press ",w),i.classList.add("is__selected")}}),i.addEventListener("mouseup",function(m){setTimeout(c,e);function c(){console.log("long press"),i.classList.add("is__selected")}})}});const io={class:"todo__item"},ao={class:"todo__item__header__actions__delete"},ro={class:"todo__item__header trim__text"},lo={class:"todo__item__header__title"},co={class:"todo__item__content"},po={class:"trim__text"};function uo(o,e,i,m,c,O){const p=d("Icon"),h=d("AppListItem");return u(),v(h,{class:N(o.priority)},{default:_(()=>[t("div",io,[t("div",ao,[s(p,{icon:"mdi:close-circle-outline",onClick:e[0]||(e[0]=f=>o.$emit("delete-todo"))})]),t("div",null,[t("div",ro,[t("div",lo,[t("h3",null,b(o.todo.title),1)])]),t("div",co,[t("p",po,b(o.todo.description),1)])]),r(t("div",{class:"todo__item__header__actions",onClick:e[1]||(e[1]=f=>o.$emit("show-options"))},[s(p,{icon:"mdi:dots-vertical"})],512),[[l,o.isSelected]])])]),_:1},8,["class"])}const _o=F(no,[["render",uo],["__scopeId","data-v-59edbf92"]]),mo=V({name:"TodoView",components:{BaseButton:J,Icon:E,AppModal:Z,BaseTextInput:oo,AppEmptyState:x,AppTodoItem:_o,AppNetworkError:eo,Spinner:to},data:()=>({showTodoModal:!1,todo:{title:"",description:"",date:"",priority:""}}),mounted(){console.log("mounted")},created(){this.makeTodoRequest(),console.log("created hook")},methods:{...G(M,{makeTodoRequest:"fetchAllTodo",createTodo:"createTodo",deleteTodo:"deleteTodo"}),async makeCreateTodo(){this.createTodo({...this.todo}),this.showTodoModal=!1}},computed:{...B(M,["todoArray","isLoading","isFetchingTodoArray","errorFetchingTodo"]),...B(I,{bearerToken:"authorizationToken"}),disabledState(){return this.isLoading===!0}}});const a=o=>(X("data-v-c0dfc46a"),o=o(),Y(),o),ho={class:"fetching__todo"},fo=a(()=>t("p",null,"fetching todo",-1)),To={class:"header"},go={class:"select__form__field"},yo=a(()=>t("label",{for:"priority"},"Priority",-1)),Ao=a(()=>t("option",{disabled:"",value:""},"Please select priority",-1)),wo=a(()=>t("option",null,"urgent",-1)),vo=a(()=>t("option",null,"not urgent",-1)),Io=a(()=>t("option",null,"delete",-1)),So=a(()=>t("option",null,"delicate",-1)),$o=a(()=>t("option",null,"normal",-1)),ko=[Ao,wo,vo,Io,So,$o];function bo(o,e,i,m,c,O){var $;const p=d("Spinner"),h=d("AppNetworkError"),f=d("AppEmptyState"),P=d("AppTodoItem"),z=d("IconPlus"),T=d("BaseButton"),S=d("Icon"),g=d("BaseTextInput"),D=d("AppModal");return u(),L(C,null,[r(t("div",ho,[s(p),fo],512),[[l,o.isFetchingTodoArray]]),r(s(h,null,null,512),[[l,o.todoArray==null]]),(($=o.todoArray)==null?void 0:$.length)==0?(u(),v(f,{key:0})):H("",!0),(u(!0),L(C,null,K(o.todoArray,({title:n,description:R,id:k,priority:j})=>(u(),v(P,{todo:{title:n,description:R,id:k,priority:j},onDeleteTodo:Bo=>o.deleteTodo(k)},null,8,["todo","onDeleteTodo"]))),256)),t("div",To,[s(T,{text:"add new",class:"add-new-button",onClick:e[0]||(e[0]=n=>o.showTodoModal=!0)},{default:_(()=>[s(z)]),_:1})]),s(T,{text:"",class:"add-new-fab",onClick:e[1]||(e[1]=n=>o.showTodoModal=!0)},{default:_(()=>[s(S,{icon:"mdi:plus"})]),_:1}),r(s(D,{onCloseModal:e[6]||(e[6]=n=>o.showTodoModal=!1),title:"Add New Todo"},{content:_(()=>[t("form",{action:"",onSubmit:e[5]||(e[5]=W((...n)=>o.makeCreateTodo&&o.makeCreateTodo(...n),["prevent"]))},[s(g,{label:"heading",type:"text",placeholder:"heading",modelValue:o.todo.title,"onUpdate:modelValue":e[2]||(e[2]=n=>o.todo.title=n),class:"field"},null,8,["modelValue"]),s(g,{placeholder:"description",label:"description",modelValue:o.todo.description,"onUpdate:modelValue":e[3]||(e[3]=n=>o.todo.description=n),class:"field"},null,8,["modelValue"]),s(g,{placeholder:"github url",label:"due date",type:"date",model:o.todo.date,class:"field"},null,8,["model"]),t("div",go,[yo,r(t("select",{"onUpdate:modelValue":e[4]||(e[4]=n=>o.todo.priority=n)},ko,512),[[Q,o.todo.priority]]),s(S,{icon:"mdi:menu-down",class:"select__arrow__down"})]),s(T,{text:"",type:"submit",disabled:o.disabledState,class:N([o.disabledState==!0?"disabled__button":""])},{default:_(()=>[r(t("span",null,"Add Todo",512),[[l,!o.isLoading]]),r(s(p,{"animation-duration":1e3,size:30,color:"#ffffff"},null,512),[[l,o.isLoading]])]),_:1},8,["disabled","class"])],32)]),_:1},512),[[l,o.showTodoModal]])],64)}const Fo=F(mo,[["render",bo],["__scopeId","data-v-c0dfc46a"]]);export{Fo as default};
